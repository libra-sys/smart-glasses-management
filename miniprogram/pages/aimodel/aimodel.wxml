<view class="container">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <view class="header">
    <text class="page-title">AIæ¨¡å‹ç®¡ç†</text>
  </view>

  <!-- å½“å‰ä½¿ç”¨çš„æ¨¡å‹ -->
  <view class="section">
    <text class="section-title">å½“å‰æ¨¡å‹</text>
    <view wx:for="{{models}}" wx:key="id" class="model-item {{selectedModel === item.id ? 'selected' : ''}}">
      <view class="model-icon" style="background-color: {{item.color}};">
        <text class="icon-emoji">{{item.icon}}</text>
      </view>
      <view class="model-info">
        <view class="model-header">
          <text class="model-name">{{item.name}}</text>
          <text class="model-provider">{{item.provider}}</text>
        </view>
        <text class="model-desc">{{item.description}}</text>
        <view wx:if="item.configured" class="model-status">
          <text class="status-badge configured">å·²é…ç½®</text>
          <text class="status-badge {{item.enabled ? 'enabled' : 'disabled'}}">
            {{item.enabled ? 'å·²å¯ç”¨' : 'å·²ç¦ç”¨'}}
          </text>
        </view>
        <text wx:else class="model-status-text unconfigured">æœªé…ç½®</text>
      </view>
      <view class="model-actions">
        <button 
          class="config-btn"
          bindtap="configureModel"
          data-index="{{index}}"
        >
          {{item.configured ? 'é‡æ–°é…ç½®' : 'é…ç½®'}}
        </button>
        <switch 
          wx:if="{{item.configured}}"
          checked="{{item.enabled}}" 
          bindchange="toggleModel"
          data-index="{{index}}"
          class="model-switch"
        />
        <button 
          wx:if="{{item.configured && item.enabled}}"
          class="select-btn {{selectedModel === item.id ? 'selected' : ''}}"
          bindtap="selectModel"
          data-id="{{item.id}}"
        >
          {{selectedModel === item.id ? 'ä½¿ç”¨ä¸­' : 'åˆ‡æ¢'}}
        </button>
      </view>
    </view>
  </view>

  <!-- é…ç½®å¼¹çª— -->
  <view wx:if="{{showConfigModal}}" class="modal-mask" catchtap="closeConfigModal">
    <view class="modal-content" catchtap="stopPropagation">
      <view class="modal-header">
        <text class="modal-title">é…ç½® {{currentConfigModel.name}}</text>
        <text class="modal-close" bindtap="closeConfigModal">Ã—</text>
      </view>
      
      <view class="modal-body">
        <view class="form-item">
          <text class="form-label">æœåŠ¡å•†</text>
          <text class="form-value">{{currentConfigModel.provider}}</text>
        </view>
        
        <view class="form-item">
          <text class="form-label">API Key</text>
          <input 
            class="form-input"
            type="text"
            password
            placeholder="è¯·è¾“å…¥API Key"
            value="{{currentConfigModel.apiKey}}"
            bindinput="inputApiKey"
          />
        </view>
        
        <view class="form-tips">
          <text class="tips-text">ğŸ’¡ è¯·åœ¨{{currentConfigModel.provider}}å®˜ç½‘è·å–API Key</text>
        </view>
      </view>
      
      <view class="modal-footer">
        <button class="test-btn" bindtap="testConnection">æµ‹è¯•è¿æ¥</button>
        <button class="save-btn" bindtap="saveConfig">ä¿å­˜</button>
      </view>
    </view>
  </view>
</view>
